#include "hamming.h"
/*
uint32_t Hamming(uint16_t w) {
	uint32_t A = ((uint32_t)((w>>15)^(w>>14)^(w>>12)^(w>>11)^(w>>9)^(w>>7)^(w>>5)^(w>>4)^(w>>2)^w) & 1) << 20;
	uint32_t B = ((uint32_t)((w>>15)^(w>>13)^(w>>12)^(w>>10)^(w>>9)^(w>>6)^(w>>5)^(w>>3)^(w>>2)) & 1) << 19;
	uint32_t C = ((uint32_t)((w>>14)^(w>>13)^(w>>12)^(w>>8)^(w>>7)^(w>>6)^(w>>5)^(w>>1)^w) & 1) << 17;
	uint32_t D = ((uint32_t)((w>>11)^(w>>10)^(w>>9)^(w>>8)^(w>>7)^(w>>6)^(w>>5)) & 1) << 13;
	uint32_t E = ((uint32_t)((w>>4)^(w>>3)^(w>>2)^(w>>1)^w) & 1) << 5;
	
	uint32_t d1 = ((uint32_t)w & (1 << 15)) << 3;
	uint32_t d2 = ((uint32_t)w & ((1 << 14) | (1 << 13) | (1 << 12))) << 2;
	uint32_t d3 = ((uint32_t)w & ((1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 7) | (1 << 6) | (1 << 5))) << 1;
	uint32_t d4 = (uint32_t)w & ((1 << 4) | (1 << 3) | (1 << 2) | (1 << 1) | (1 << 0));
	return A | B | d1 | C | d2 | D | d3 | E | d4;
}	
*/

uint32_t Hamming(uint32_t w) {
	uint32_t A = ((uint32_t)((w>>23)^(w>>22)^(w>>20)^(w>>19)^(w>>17)^(w>>15)^(w>>13)^(w>>12)^(w>>10)^(w>>8)^(w>>6)^(w>>4)^(w>>2)^(w>>0))&1)<<28;
	uint32_t B = ((uint32_t)((w>>23)^(w>>21)^(w>>20)^(w>>18)^(w>>17)^(w>>14)^(w>>13)^(w>>11)^(w>>10)^(w>>7)^(w>>6)^(w>>3)^(w>>2))&1)<<27;
	uint32_t C = ((uint32_t)((w>>22)^(w>>21)^(w>>20)^(w>>16)^(w>>15)^(w>>14)^(w>>13)^(w>>9)^(w>>8)^(w>>7)^(w>>6)^(w>>1)^(w>>0))&1)<<25;
	uint32_t D = ((uint32_t)((w>>19)^(w>>18)^(w>>17)^(w>>16)^(w>>15)^(w>>14)^(w>>13)^(w>>5)^(w>>4)^(w>>3)^(w>>2)^(w>>1)^(w>>0))&1)<<21;
	uint32_t E = ((uint32_t)((w>>12)^(w>>11)^(w>>10)^(w>>9)^(w>>8)^(w>>7)^(w>>6)^(w>>5)^(w>>4)^(w>>3)^(w>>2)^(w>>1)^(w>>0))&1)<<13;
	
	uint32_t d1 = ((uint32_t)w&(1<<23))<<3;
	uint32_t d2 = ((uint32_t)w&((1<<22)|(1<<21)|(1<<20)))<<2;
	uint32_t d3 = ((uint32_t)w&((1<<19)|(1<<18)|(1<<17)|(1<<16)|(1<<15)|(1<<14)|(1<<13)))<<1;
	uint32_t d4 = (uint32_t)w&((1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<7)|(1<<6)|(1<<5)|(1<<4)|(1<<3)|(1<<2)|(1<<1)|(1<<0));
	return A | B | d1 | C | d2 | D | d3 | E | d4;
}
